/*!jQuery Migrate v1.4.1 | (c) jQuery Foundation and other contributors | jquery.org/license*/"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(a,b,c){function d(c){var d=b.console;f[c]||(f[c]=!0,a.migrateWarnings.push(c),d&&d.warn&&!a.migrateMute&&(d.warn("JQMIGRATE: "+c),a.migrateTrace&&d.trace&&d.trace()))}function e(b,c,e,f){if(Object.defineProperty)try{return void Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return d(f),e},set:function(a){d(f),e=a}})}catch(g){}a._definePropertyBroken=!0,b[c]=e}a.migrateVersion="1.4.1";var f={};a.migrateWarnings=[],b.console&&b.console.log&&b.console.log("JQMIGRATE: Migrate is installed"+(a.migrateMute?"":" with logging active")+", version "+a.migrateVersion),a.migrateTrace===c&&(a.migrateTrace=!0),a.migrateReset=function(){f={},a.migrateWarnings.length=0},"BackCompat"===document.compatMode&&d("jQuery is not compatible with Quirks Mode");var g=a("<input/>",{size:1}).attr("size")&&a.attrFn,h=a.attr,i=a.attrHooks.value&&a.attrHooks.value.get||function(){return null},j=a.attrHooks.value&&a.attrHooks.value.set||function(){return c},k=/^(?:input|button)$/i,l=/^[238]$/,m=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,n=/^(?:checked|selected)$/i;e(a,"attrFn",g||{},"jQuery.attrFn is deprecated"),a.attr=function(b,e,f,i){var j=e.toLowerCase(),o=b&&b.nodeType;return i&&(h.length<4&&d("jQuery.fn.attr( props, pass ) is deprecated"),b&&!l.test(o)&&(g?e in g:a.isFunction(a.fn[e])))?a(b)[e](f):("type"===e&&f!==c&&k.test(b.nodeName)&&b.parentNode&&d("Can't change the 'type' of an input or button in IE 6/7/8"),!a.attrHooks[j]&&m.test(j)&&(a.attrHooks[j]={get:function(b,d){var e,f=a.prop(b,d);return f===!0||"boolean"!=typeof f&&(e=b.getAttributeNode(d))&&e.nodeValue!==!1?d.toLowerCase():c},set:function(b,c,d){var e;return c===!1?a.removeAttr(b,d):(e=a.propFix[d]||d,e in b&&(b[e]=!0),b.setAttribute(d,d.toLowerCase())),d}},n.test(j)&&d("jQuery.fn.attr('"+j+"') might use property instead of attribute")),h.call(a,b,e,f))},a.attrHooks.value={get:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?i.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value') no longer gets properties"),b in a?a.value:null)},set:function(a,b){var c=(a.nodeName||"").toLowerCase();return"button"===c?j.apply(this,arguments):("input"!==c&&"option"!==c&&d("jQuery.fn.attr('value', val) no longer sets properties"),void(a.value=b))}};var o,p,q=a.fn.init,r=a.find,s=a.parseJSON,t=/^\s*</,u=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,v=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,w=/^([^<]*)(<[\w\W]+>)([^>]*)$/;a.fn.init=function(b,e,f){var g,h;return b&&"string"==typeof b&&!a.isPlainObject(e)&&(g=w.exec(a.trim(b)))&&g[0]&&(t.test(b)||d("$(html) HTML strings must start with '<' character"),g[3]&&d("$(html) HTML text after last tag is ignored"),"#"===g[0].charAt(0)&&(d("HTML string cannot start with a '#' character"),a.error("JQMIGRATE: Invalid selector string (XSS)")),e&&e.context&&e.context.nodeType&&(e=e.context),a.parseHTML)?q.call(this,a.parseHTML(g[2],e&&e.ownerDocument||e||document,!0),e,f):(h=q.apply(this,arguments),b&&b.selector!==c?(h.selector=b.selector,h.context=b.context):(h.selector="string"==typeof b?b:"",b&&(h.context=b.nodeType?b:e||document)),h)},a.fn.init.prototype=a.fn,a.find=function(a){var b=Array.prototype.slice.call(arguments);if("string"==typeof a&&u.test(a))try{document.querySelector(a)}catch(c){a=a.replace(v,function(a,b,c,d){return"["+b+c+'"'+d+'"]'});try{document.querySelector(a),d("Attribute selector with '#' must be quoted: "+b[0]),b[0]=a}catch(e){d("Attribute selector with '#' was not fixed: "+b[0])}}return r.apply(this,b)};var x;for(x in r)Object.prototype.hasOwnProperty.call(r,x)&&(a.find[x]=r[x]);a.parseJSON=function(a){return a?s.apply(this,arguments):(d("jQuery.parseJSON requires a valid JSON string"),null)},a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},a.browser||(o=a.uaMatch(navigator.userAgent),p={},o.browser&&(p[o.browser]=!0,p.version=o.version),p.chrome?p.webkit=!0:p.webkit&&(p.safari=!0),a.browser=p),e(a,"browser",a.browser,"jQuery.browser is deprecated"),a.boxModel=a.support.boxModel="CSS1Compat"===document.compatMode,e(a,"boxModel",a.boxModel,"jQuery.boxModel is deprecated"),e(a.support,"boxModel",a.support.boxModel,"jQuery.support.boxModel is deprecated"),a.sub=function(){function b(a,c){return new b.fn.init(a,c)}a.extend(!0,b,this),b.superclass=this,b.fn=b.prototype=this(),b.fn.constructor=b,b.sub=this.sub,b.fn.init=function(d,e){var f=a.fn.init.call(this,d,e,c);return f instanceof b?f:b(f)},b.fn.init.prototype=b.fn;var c=b(document);return d("jQuery.sub() is deprecated"),b},a.fn.size=function(){return d("jQuery.fn.size() is deprecated; use the .length property"),this.length};var y=!1;a.swap&&a.each(["height","width","reliableMarginRight"],function(b,c){var d=a.cssHooks[c]&&a.cssHooks[c].get;d&&(a.cssHooks[c].get=function(){var a;return y=!0,a=d.apply(this,arguments),y=!1,a})}),a.swap=function(a,b,c,e){var f,g,h={};y||d("jQuery.swap() is undocumented and deprecated");for(g in b)h[g]=a.style[g],a.style[g]=b[g];f=c.apply(a,e||[]);for(g in b)a.style[g]=h[g];return f},a.ajaxSetup({converters:{"text json":a.parseJSON}});var z=a.fn.data;a.fn.data=function(b){var e,f,g=this[0];return!g||"events"!==b||1!==arguments.length||(e=a.data(g,b),f=a._data(g,b),e!==c&&e!==f||f===c)?z.apply(this,arguments):(d("Use of jQuery.fn.data('events') is deprecated"),f)};var A=/\/(java|ecma)script/i;a.clean||(a.clean=function(b,c,e,f){c=c||document,c=!c.nodeType&&c[0]||c,c=c.ownerDocument||c,d("jQuery.clean() is deprecated");var g,h,i,j,k=[];if(a.merge(k,a.buildFragment(b,c).childNodes),e)for(i=function(a){return!a.type||A.test(a.type)?f?f.push(a.parentNode?a.parentNode.removeChild(a):a):e.appendChild(a):void 0},g=0;null!=(h=k[g]);g++)a.nodeName(h,"script")&&i(h)||(e.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(j=a.grep(a.merge([],h.getElementsByTagName("script")),i),k.splice.apply(k,[g+1,0].concat(j)),g+=j.length));return k});var B=a.event.add,C=a.event.remove,D=a.event.trigger,E=a.fn.toggle,F=a.fn.live,G=a.fn.die,H=a.fn.load,I="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",J=new RegExp("\\b(?:"+I+")\\b"),K=/(?:^|\s)hover(\.\S+|)\b/,L=function(b){return"string"!=typeof b||a.event.special.hover?b:(K.test(b)&&d("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),b&&b.replace(K,"mouseenter$1 mouseleave$1"))};a.event.props&&"attrChange"!==a.event.props[0]&&a.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),a.event.dispatch&&e(a.event,"handle",a.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),a.event.add=function(a,b,c,e,f){a!==document&&J.test(b)&&d("AJAX events should be attached to document: "+b),B.call(this,a,L(b||""),c,e,f)},a.event.remove=function(a,b,c,d,e){C.call(this,a,L(b)||"",c,d,e)},a.each(["load","unload","error"],function(b,c){a.fn[c]=function(){var a=Array.prototype.slice.call(arguments,0);return"load"===c&&"string"==typeof a[0]?H.apply(this,a):(d("jQuery.fn."+c+"() is deprecated"),a.splice(0,0,c),arguments.length?this.bind.apply(this,a):(this.triggerHandler.apply(this,a),this))}}),a.fn.toggle=function(b,c){if(!a.isFunction(b)||!a.isFunction(c))return E.apply(this,arguments);d("jQuery.fn.toggle(handler, handler...) is deprecated");var e=arguments,f=b.guid||a.guid++,g=0,h=function(c){var d=(a._data(this,"lastToggle"+b.guid)||0)%g;return a._data(this,"lastToggle"+b.guid,d+1),c.preventDefault(),e[d].apply(this,arguments)||!1};for(h.guid=f;g<e.length;)e[g++].guid=f;return this.click(h)},a.fn.live=function(b,c,e){return d("jQuery.fn.live() is deprecated"),F?F.apply(this,arguments):(a(this.context).on(b,this.selector,c,e),this)},a.fn.die=function(b,c){return d("jQuery.fn.die() is deprecated"),G?G.apply(this,arguments):(a(this.context).off(b,this.selector||"**",c),this)},a.event.trigger=function(a,b,c,e){return c||J.test(a)||d("Global events are undocumented and deprecated"),D.call(this,a,b,c||document,e)},a.each(I.split("|"),function(b,c){a.event.special[c]={setup:function(){var b=this;return b!==document&&(a.event.add(document,c+"."+a.guid,function(){a.event.trigger(c,Array.prototype.slice.call(arguments,1),b,!0)}),a._data(this,c,a.guid++)),!1},teardown:function(){return this!==document&&a.event.remove(document,c+"."+a._data(this,c)),!1}}}),a.event.special.ready={setup:function(){this===document&&d("'ready' event is deprecated")}};var M=a.fn.andSelf||a.fn.addBack,N=a.fn.find;if(a.fn.andSelf=function(){return d("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),M.apply(this,arguments)},a.fn.find=function(a){var b=N.apply(this,arguments);return b.context=this.context,b.selector=this.selector?this.selector+" "+a:a,b},a.Callbacks){var O=a.Deferred,P=[["resolve","done",a.Callbacks("once memory"),a.Callbacks("once memory"),"resolved"],["reject","fail",a.Callbacks("once memory"),a.Callbacks("once memory"),"rejected"],["notify","progress",a.Callbacks("memory"),a.Callbacks("memory")]];a.Deferred=function(b){var c=O(),e=c.promise();return c.pipe=e.pipe=function(){var b=arguments;return d("deferred.pipe() is deprecated"),a.Deferred(function(d){a.each(P,function(f,g){var h=a.isFunction(b[f])&&b[f];c[g[1]](function(){var b=h&&h.apply(this,arguments);b&&a.isFunction(b.promise)?b.promise().done(d.resolve).fail(d.reject).progress(d.notify):d[g[0]+"With"](this===e?d.promise():this,h?[b]:arguments)})}),b=null}).promise()},c.isResolved=function(){return d("deferred.isResolved is deprecated"),"resolved"===c.state()},c.isRejected=function(){return d("deferred.isRejected is deprecated"),"rejected"===c.state()},b&&b.call(c,c),c}}}(jQuery,window);var aiEnableCookie=false;var aiId='';var aiExtraSpace=0;var aiAccTime=0;var aiCallbackExists=typeof aiReadyCallbacks!=='undefined'&&aiReadyCallbacks instanceof Array;var aiReadyCallbacks=aiCallbackExists?aiReadyCallbacks:[];function aiResizeIframe(obj,resizeWidth,resizeMinHeight){try{if(obj.contentWindow.location.href==='about:blank'){return;}
if(obj.contentWindow.document.body!=null){var oldScrollposition=jQuery(window).scrollTop();obj.style.marginTop=0;obj.style.marginBottom=0;obj.height=Number(resizeMinHeight);obj.style.height=Number(resizeMinHeight)+'px';var newheight=aiGetIframeHeight(obj);obj.height=newheight;obj.style.height=newheight+'px';if(jQuery('#ai-zoom-div-'+obj.id).length!==0){var zoom=window['zoom_'+obj.id];jQuery('#ai-zoom-div-'+obj.id).css('height',newheight*zoom);}
if(aiEnableCookie&&aiExtraSpace===0){aiWriteCookie(newheight);}
var hash=aiGetIframeHash(obj.contentWindow.location.href);if(hash!==-1){var iframeId='#'+obj.id;try{var hashposition=jQuery(iframeId).contents().find('#'+hash);if(hashposition.length!==0){var hashpositionTop=hashposition.offset().top;oldScrollposition=Math.round(jQuery(iframeId).offset().top+hashpositionTop);}}catch(e){}}
setTimeout(function(){jQuery("html,body").scrollTop(oldScrollposition);},100);if(resizeWidth==='true'){var newWidth=aiGetIframeWidth(obj);obj.width=newWidth;obj.style.width=newWidth+'px';}
var fCallback=window['resizeCallback'+obj.id];fCallback();if(window.frameElement!=null){parent.jQuery('iframe').trigger('onload');}}else{setTimeout(function(){aiResizeIframe(obj,resizeWidth);},100);}}catch(e){if(console&&console.log){console.log('Advanced iframe configuration error: You have enabled the resize of the iframe for pages on the same domain. But you use an iframe page on a different domain. You need to use the external workaround like described in the settings. Also check the next log. There the browser message for this error is displayed.');console.log(e);}}}
function aiGetIframeHash(url){var hash=url.split('#')[1];return(hash)?hash:'-1';}
function aiGetIframeHeight(obj){var bodyHeight=Math.max(obj.contentWindow.document.body.scrollHeight,obj.contentWindow.document.body.offsetHeight,obj.contentWindow.document.documentElement.scrollHeight,obj.contentWindow.document.documentElement.offsetHeight);var newheight=bodyHeight+aiExtraSpace;return newheight;}
function aiGetIframeWidth(obj){var oldWidth=obj.width;obj.width=1;obj.style.width='1px';var bodyWidth=Math.max(obj.contentWindow.document.body.scrollWidth,obj.contentWindow.document.body.offsetWidth,obj.contentWindow.document.documentElement.scrollWidth,obj.contentWindow.document.documentElement.offsetWidth);if(bodyWidth!==1){obj.width=bodyWidth;obj.style.width=bodyWidth+'px';}else{obj.width=oldWidth;obj.style.width=oldWidth+'px';}
return bodyWidth;}
function aiGetParentIframeWidth(obj){if(obj!=null&&jQuery('#'+obj.id).length!==0){return jQuery('#'+obj.id).width();}else{return-1;}}
function aiResizeIframeHeightById(id,nHeight){try{var fCallback=window['resizeCallback'+id];fCallback();var height=parseInt(nHeight,10)+aiExtraSpace;var iframe=document.getElementById(id);var oldScrollposition=jQuery(document).scrollTop();iframe.height=height;iframe.style.height=height+'px';jQuery("html,body").scrollTop(oldScrollposition);if(aiEnableCookie&&aiExtraSpace===0){aiWriteCookie(height);}
var parentResizeCall=window['aiExecuteWorkaround_'+id];if(parentResizeCall!=null){parentResizeCall();}}catch(e){if(console&&console.log){console.log('Advanced iframe configuration error: The id of the parent and the external workaround are different! Check your settings.');console.log(e);}}}
function aiScrollToTop(id,position){if(position==='iframe'){var pos=jQuery('#'+id).position();window.scrollTo(0,pos.top);}else{window.scrollTo(0,0);}}
function aiWriteCookie(height){var cookieName='ai-last-height';if(aiId!==''){cookieName=cookieName+'-'+aiId;}
var cookieStr=cookieName+'='+height;document.cookie=cookieStr;}
function aiUseCookie(){var cookieName='ai-last-height';if(aiId!==''){cookieName=cookieName+'-'+aiId;}
var allcookies=document.cookie;var cookiearray=allcookies.split(';');for(var i=0;i<cookiearray.length;i++){var name=cookiearray[i].split('=')[0];var value=cookiearray[i].split('=')[1];if(name===cookieName&&value!==null&&aiIsNumeric(value)){var iframe=document.getElementById(aiId);iframe.height=parseInt(value,10);iframe.style.height=value+'px';}}}
function aiIsNumeric(input){return!isNaN(input);}
function aiDisableHeight(){jQuery('#additional_height').attr('readonly','readonly');jQuery('#additional_height').val('0');}
function aiEnableHeight(){jQuery('#additional_height').removeAttr('readonly');}
function aiShowElementOnly(iframeId,showElement){try{var iframe=jQuery(iframeId).contents().find('body');var selectedBox=iframe.find(showElement).clone(true,true);iframe.find('*').not(jQuery('script')).remove();iframe.prepend(selectedBox);}catch(e){if(console&&console.log){console.log('Advanced iframe configuration error: You have enabled to show only one element of the iframe for pages on the same domain. But you use an iframe page on a different domain. You need to use the pro version of the external workaround like described in the settings. Also check the next log. There the browser message for this error is displayed.');console.log(e);}}}
function aiCheckIfValidTarget(evt,elements){var targ;if(!evt){evt=window.event;}
if(evt.target){targ=evt.target;}else if(evt.srcElement){targ=evt.srcElement;}
if(targ.nodeType===3){targ=targ.parentNode;}
var parts=elements.split(',');for(var i=0;i<parts.length;++i){var selectorArray=parts[i].split(':');if(selectorArray[0].toLowerCase()===targ.nodeName.toLowerCase()){if(selectorArray.length>1){if(targ.id.toLowerCase().indexOf(selectorArray[1].toLowerCase())!==-1){return true;}}else{return true;}}}
return false;}
function aiOpenSelectorWindow(url){var localWidth=jQuery('#width').val();var localHeight=jQuery('#height').val();if(localWidth.indexOf('%')>=0||Number(localWidth)<900){localWidth=900;}
localWidth=Number(localWidth)+40;if(localWidth>(screen.width)){localWidth=screen.width;}
if(localHeight.indexOf('%')>=0){localHeight=screen.height;}else{localHeight=Number(localHeight)+480;}
if(localHeight>(screen.height-50)){localHeight=screen.height-50;}
var options='width='+localWidth+',height='+localHeight+',left=0,top=0,resizable=1,scrollbars=1';var popup_window=window.open(url,'',options);popup_window.focus();}
function aiDisableAiResizeOptions(value){jQuery('#onload_resize_delay').prop('readonly',value);jQuery('input[id=store_height_in_cookie1]:radio').attr('disabled',value);jQuery('input[id=store_height_in_cookie2]:radio').attr('disabled',value);jQuery('#additional_height').prop('readonly',value);jQuery('input[id=onload_resize_width1]:radio').attr('disabled',value);jQuery('input[id=onload_resize_width2]:radio').attr('disabled',value);jQuery('#resize_on_click').prop('readonly',value);jQuery('#resize_on_click_elements').prop('readonly',value);jQuery('#resize_on_ajax').prop('readonly',value);jQuery('input[id=resize_on_ajax_jquery1]:radio').attr('disabled',value);jQuery('input[id=resize_on_ajax_jquery2]:radio').attr('disabled',value);}
function aiDisablePartOfIframeOptions(value){jQuery('#show_part_of_iframe_x').prop('readonly',value);jQuery('#show_part_of_iframe_y').prop('readonly',value);jQuery('#show_part_of_iframe_height').prop('readonly',value);jQuery('#show_part_of_iframe_width').prop('readonly',value);jQuery('input[id=show_part_of_iframe_allow_scrollbar_horizontal1]:radio').attr('disabled',value);jQuery('input[id=show_part_of_iframe_allow_scrollbar_horizontal2]:radio').attr('disabled',value);jQuery('input[id=show_part_of_iframe_allow_scrollbar_vertical1]:radio').attr('disabled',value);jQuery('input[id=show_part_of_iframe_allow_scrollbar_vertical2]:radio').attr('disabled',value);jQuery('#show_part_of_iframe_next_viewports').prop('readonly',value);jQuery('input[id=show_part_of_iframe_next_viewports_loop1]:radio').attr('disabled',value);jQuery('input[id=show_part_of_iframe_next_viewports_loop2]:radio').attr('disabled',value);jQuery('#show_part_of_iframe_new_window').prop('readonly',value);jQuery('#show_part_of_iframe_new_url').prop('readonly',value);jQuery('input[id=show_part_of_iframe_next_viewports_hide1]:radio').attr('disabled',value);jQuery('input[id=show_part_of_iframe_next_viewports_hide2]:radio').attr('disabled',value);jQuery('#show_part_of_iframe_style').prop('readonly',value);jQuery('input[id=show_part_of_iframe_zoom1]:radio').attr('disabled',value);jQuery('input[id=show_part_of_iframe_zoom2]:radio').attr('disabled',value);jQuery('input[id=show_part_of_iframe_zoom3]:radio').attr('disabled',value);}
function aiDisableLazyLoadOptions(value){jQuery('#enable_lazy_load_threshold').prop('readonly',value);jQuery('#enable_lazy_load_fadetime').prop('readonly',value);jQuery('input[id=enable_lazy_load_reserve_space1]:radio').attr('disabled',value);jQuery('input[id=enable_lazy_load_reserve_space2]:radio').attr('disabled',value);jQuery('input[id=enable_lazy_load_manual1]:radio').attr('disabled',value);jQuery('input[id=enable_lazy_load_manual2]:radio').attr('disabled',value);jQuery('input[id=enable_lazy_load_manual3]:radio').attr('disabled',value);}
function aiDisableIframeAsLayerOptions(value){jQuery('input[id=show_iframe_as_layer_full]:radio').attr('disabled',value);jQuery('#show_iframe_as_layer_header_file').prop('readonly',value);jQuery('#show_iframe_as_layer_header_height').prop('readonly',value);jQuery('input[id=show_iframe_as_layer_header_position1]:radio').attr('disabled',value);jQuery('input[id=show_iframe_as_layer_header_position2]:radio').attr('disabled',value);jQuery('input[id=show_iframe_as_layer_full1]:radio').attr('disabled',value);jQuery('input[id=show_iframe_as_layer_full2]:radio').attr('disabled',value);jQuery('input[id=show_iframe_as_layer_full3]:radio').attr('disabled',value);jQuery('input[id=show_iframe_as_layer_keep_content1]:radio').attr('disabled',value);jQuery('input[id=show_iframe_as_layer_keep_content2]:radio').attr('disabled',value);}
var instance;function aiInitAdminConfiguration(isPro,acc_type){if(jQuery('input[type=radio][name=onload_resize]:checked').val()==='false'){aiDisableAiResizeOptions(true);}
jQuery('input[type=radio][name=onload_resize]').click(function(){if(jQuery(this).val()==='true'){jQuery('input:radio[name=enable_external_height_workaround]')[1].checked=true;aiDisableAiResizeOptions(false);}else{jQuery('#onload_resize_delay').val('');aiDisableAiResizeOptions(true);}});jQuery('input[type=radio][name=enable_external_height_workaround]').click(function(){if(jQuery(this).val()==='true'){jQuery('input:radio[name=onload_resize]')[1].checked=true;jQuery('#onload_resize_delay').val('');aiDisableAiResizeOptions(true);}});if(jQuery('input[type=radio][name=show_part_of_iframe]:checked').val()==='false'){aiDisablePartOfIframeOptions(true);}
jQuery('input[type=radio][name=show_part_of_iframe]').click(function(){if(jQuery(this).val()==='false'){aiDisablePartOfIframeOptions(true);}else{aiDisablePartOfIframeOptions(false);}});if(jQuery('input[type=radio][name=show_iframe_as_layer]:checked').val()==='false'){aiDisableIframeAsLayerOptions(true);}
jQuery('input[type=radio][name=show_iframe_as_layer]').click(function(){if(jQuery(this).val()==='false'){aiDisableIframeAsLayerOptions(true);}else{aiDisableIframeAsLayerOptions(false);}});if(jQuery('input[type=radio][name=expert_mode]:checked').val()==='true'){jQuery('.description').css('display','none');jQuery('table.form-table th').css('cursor','pointer');jQuery('table.form-table th').css('padding-top','8px').css('padding-bottom','2px');jQuery('table.form-table td').css('padding-top','5px').css('padding-bottom','5px');jQuery('table.form-table th').click(function(){jQuery('.description').css('display','none');jQuery('.description',jQuery(this).parent()).css('display','block');});}
jQuery('input[type=radio][name=expert_mode]').click(function(){if(jQuery(this).val()==='false'){jQuery('.description').css('display','block');jQuery('table.form-table th').css('cursor','auto');jQuery('table.form-table th').off('click');jQuery('table.form-table th').css('padding-top','20px').css('padding-bottom','20px');jQuery('table.form-table td').css('padding-top','15px').css('padding-bottom','15px');}else{jQuery('.description').css('display','none');jQuery('table.form-table th').css('cursor','pointer');jQuery('table.form-table th').css('padding-top','8px').css('padding-bottom','2px');jQuery('table.form-table td').css('padding-top','5px').css('padding-bottom','5px');jQuery('table.form-table th').click(function(){jQuery('.description').css('display','none');jQuery('.description',jQuery(this).parent()).css('display','block');});}});jQuery('#accordion').find('h1').click(function(){jQuery(this).next().slideToggle(aiAccTime);}).next().hide();jQuery('#accordion').find('a').click(function(){var hash=jQuery(this).prop('hash');var hash_only='#h1-'+hash.substring(1);jQuery(hash_only).next().show();location.hash=hash_only;});if(jQuery('input[type=radio][name=enable_lazy_load_manual]:checked').val()==='false'){jQuery('#enable_lazy_load_manual_element').prop('readonly',true);}
jQuery('input[type=radio][name=enable_lazy_load_manual]').click(function(){if(jQuery(this).val()==='false'||jQuery(this).val()==='auto'){jQuery('#enable_lazy_load_manual_element').prop('readonly',true);}else{jQuery('#enable_lazy_load_manual_element').prop('readonly',false);}});if(jQuery('input[type=radio][name=enable_lazy_load]:checked').val()==='false'){aiDisableLazyLoadOptions(true);jQuery('#enable_lazy_load_manual_element').prop('readonly',true);}
jQuery('input[type=radio][name=enable_lazy_load]').click(function(){if(jQuery(this).val()==='false'){aiDisableLazyLoadOptions(true);jQuery('#enable_lazy_load_manual_element').prop('readonly',true);}else{aiDisableLazyLoadOptions(false);if(jQuery('input[type=radio][name=enable_lazy_load_manual]:checked').val()==='false'||jQuery('input[type=radio][name=enable_lazy_load_manual]:checked').val()==='auto'){jQuery('#enable_lazy_load_manual_element').prop('readonly',true);}else{jQuery('#enable_lazy_load_manual_element').prop('readonly',false);}}});jQuery('.confirmation').on('click',function(){return confirm('Are you sure?');});jQuery('a.post').click(function(e){e.stopPropagation();e.preventDefault();var href=this.href;var parts=href.split('?');var url=parts[0];var params=parts[1].split('&');var pp,inputs='';url+='?'+params[0];for(var i=1,n=params.length;i<n;i++){pp=params[i].split('=');inputs+='<input type="hidden" name="'+pp[0]+'" value="'+pp[1]+'" />';}
jQuery('body').append('<form action="'+url+'" method="post" id="poster">'+inputs+'</form>');jQuery('#poster').submit();});jQuery('.ai-input-search').keyup(function(e){var searchTerm=jQuery('input.ai-input-search').val().toLowerCase();aiSettingsSearch(searchTerm,acc_type);});jQuery('.ai-input-search').on('click',function(e){setTimeout(function(){var searchTerm=jQuery('input.ai-input-search').val().toLowerCase();aiSettingsSearch(searchTerm,acc_type);},100);});jQuery(document).on('click','.nav-tab-wrapper a',function(){var current_tab=jQuery(this).attr('id');jQuery('section').hide();jQuery('section.'+current_tab).show();jQuery('#current_tab').val(current_tab.substr(4,1));jQuery('.nav-tab').removeClass('nav-tab-active');jQuery(this).addClass('nav-tab-active');jQuery(this).blur();return false;});jQuery(document).on('click','a#external-workaround-link',function(){jQuery('.external-workaround').click();jQuery(document).scrollTop(0);return false;});jQuery(document).on('click','a#resize-same-link',function(){jQuery('.advanced-settings-tab').click();location.hash='rt';return false;});jQuery(document).on('click','a.jquery-help-link',function(){jQuery('.help-tab').click();jQuery('#jquery-help').show();location.hash='jqh';aiShowHeader();return false;});jQuery(document).on('click','a#browser-detection-link',function(){jQuery('.help-tab').click();jQuery('#browser-help').show();location.hash='browser-detection-id';aiShowHeader();return false;});jQuery(document).on('click','a.howto-id-link',function(){jQuery('.help-tab').click();location.hash='how-id';aiShowHeader();return false;});jQuery(document).on('click','.modifycontent-link',function(){jQuery('.advanced-settings-tab').click();jQuery('#h1-mi').next().show();location.hash='#mi-id';aiShowHeader();return false;});jQuery(document).on('click','a.link-external-domain',function(){location.hash='#h-external-domain';aiShowHeader();return false;});jQuery(document).on('click','a#user-help-link',function(){jQuery('#user-help').css('display','block');return false;});jQuery(document).on('click','a#user-meta-link',function(){jQuery('#meta-help').css('display','block');return false;});jQuery(document).on('click','#ai-selector-help-link',function(){jQuery('#ai-selector-help').slideDown(1000);return false;});jQuery(document).on('click','.ai-selector-help-link-move',function(){location.hash='#ai-selector-help-link';aiShowHeader();jQuery('#ai-selector-help').show('slow');return false;});jQuery(document).on('click','a.post-message-help-link',function(){jQuery('.help-tab').click();location.hash='com-post-message';aiShowHeader();return false;});jQuery('#ai_form').submit(function(){var openSections='';jQuery('#accordion').find('div:visible').each(function(){var $this=jQuery(this);var open=$this.prev('h1').attr('id');if(open!==undefined){if(openSections!==''){openSections+=',';}
openSections+='#'+open;}});jQuery('#current_open_sections').val(openSections);aiSetScrollposition();});}
function aiSettingsSearch(searchTerm,accType){var found=0;if(searchTerm!==''){jQuery('#ai p').not('.form-table p').hide();jQuery('#ai ul').not('.form-table ul').hide();jQuery('#ai ol').not('.form-table ol').hide();if(accType!=='false'){jQuery('#ai h1').not('.show-always').hide();jQuery('#ai #accordion').attr('id','acc');jQuery('#ai #acc > div').show();jQuery('#ai #spacer-div').show();}
jQuery('#ai h2,#ai .icon_ai,#ai h3,#ai h4').not('.show-always').hide();jQuery('#ai .form-table').addClass('ai-remove-margin');jQuery('#ai hr, .signup_account_container, .config-file-block').hide();jQuery('#ai .hide-always').hide();jQuery('#ai .hide-search').hide();}else{jQuery('#ai p').not('.form-table p').show();jQuery('#ai section .ai-anchor').show();jQuery('#ai ul').not('.form-table ul').show();jQuery('#ai ol').not('.form-table ol').show();if(accType!=='false'){jQuery('#ai h1').not('.show-always').show();jQuery('#ai #acc').attr('id','accordion');jQuery('#ai #accordion > div').hide();jQuery('#ai #spacer-div').hide();}
jQuery('#ai h2,#ai .icon_ai,#ai h3,#ai h4').not('.show-always').show();jQuery('#ai .form-table').removeClass('ai-remove-margin');jQuery('#ai hr, .signup_account_container, .config-file-block').show();jQuery('#ai .sub-domain-container').show();jQuery('#ai .hide-search').show();jQuery('#ai .hide-always').hide();}
jQuery('#ai .mark-tab-header').removeClass('mark-tab-header');var firstHit='';jQuery('#ai tr').each(function(){var $this=jQuery(this);var valueLabel=$this.find('th').text();var valueDescription=$this.find('p.description').text();valueLabel=(valueLabel!==undefined)?valueLabel.toLowerCase():'XXXXXXX';valueDescription=(valueDescription!==undefined)?valueDescription.toLowerCase():'XXXXXXX';if(valueLabel.indexOf(searchTerm)===-1&&valueDescription.indexOf(searchTerm)===-1){$this.addClass('hide-setting');}else{$this.closest('table').prevAll('h2:first').show();$this.closest('table').prevAll('#ai .icon_ai:first').show();$this.closest('table').nextAll('p.button-submit:first').show();$this.removeClass('hide-setting');$this.closest('.hide-search').show();if(searchTerm.length>2){var headerId=$this.closest('section').attr('class');if(headerId!==undefined){jQuery('#'+headerId).addClass('mark-tab-header');if(firstHit===''){firstHit=headerId;}}}
found++;}});if(found===0){jQuery('#ai-input-search-result').show();jQuery('#ai .mark-tab-header').removeClass('mark-tab-header');}else{jQuery('#ai-input-search-result').hide();instance&&instance.revert();if(searchTerm!==''&&searchTerm.length>2){var regex=RegExp(searchTerm,'gi');instance=findAndReplaceDOMText(document.getElementById('tab_wrapper'),{find:regex,wrap:'em'});}
jQuery('#'+firstHit).click();}}
function aiResizeIframeRatio(obj,ratio){var width=jQuery('#'+obj.id).width();var valueRatio=parseFloat(ratio.replace(',','.'));var newHeight=Math.ceil(width*valueRatio);obj.height=newHeight;obj.style.height=newHeight+'px';}
function aiGenerateShortcode(){var output='[advanced_iframe ';if(jQuery('#securitykey').val()!==''){output+='securitykey="'+jQuery('#securitykey').val()+'" ';}
output+='use_shortcode_attributes_only="true" ';var include_html_val=jQuery('#include_html').val();var include_url_val=jQuery('#include_url').val();var document_domain_add=jQuery('#document_domain_add').val();if(include_html_val===undefined||(include_html_val===''&&include_url_val==='')){var src=jQuery('#src').val();if(src===''){alert('Required url is missing.');}else{output+='src="'+src+'" ';}
output+=aiGenerateTextShortcode('width');output+=aiGenerateTextShortcode('height');output+=aiGenerateRadioShortcode('scrolling','none');output+=aiGenerateRadioShortcode('enable_ios_mobile_scolling','false');output+=aiGenerateTextShortcode('marginwidth');output+=aiGenerateTextShortcode('marginheight');output+=aiGenerateTextShortcode('frameborder');output+=aiGenerateRadioShortcode('transparency','true');output+=aiGenerateTextShortcode('class');output+=aiGenerateTextShortcode('style');output+=aiGenerateTextShortcode('id');output+=aiGenerateTextShortcode('name');output+=aiGenerateRadioShortcode('allowfullscreen','false');output+=aiGenerateTextShortcode('safari_fix_url');output+=aiGenerateTextShortcode('url_forward_parameter');output+=aiGenerateTextShortcode('map_parameter_to_url');output+=aiGenerateRadioShortcode('add_iframe_url_as_param','false');output+=aiGenerateTextShortcode('add_iframe_url_as_param_prefix');output+=aiGenerateRadioShortcode('onload_scroll_top','false');output+=aiGenerateRadioShortcode('hide_page_until_loaded','false');output+=aiGenerateRadioShortcode('show_iframe_loader','false');output+=aiGenerateTextShortcode('hide_content_until_iframe_color');output+=aiGenerateTextShortcode('iframe_zoom');output+=aiGenerateRadioShortcode('iframe_zoom_ie8','false');output+=aiGenerateRadioShortcode('use_zoom_absolute_fix','false');output+=aiGenerateRadioShortcode('auto_zoom','false');output+=aiGenerateTextShortcode('auto_zoom_by_ratio');output+=aiGenerateRadioShortcode('enable_responsive_iframe','false');output+=aiGenerateTextShortcode('iframe_height_ratio');output+=aiGenerateRadioShortcode('enable_lazy_load','false');output+=aiGenerateTextShortcodeWithDefault('enable_lazy_load_threshold','3000');output+=aiGenerateRadioShortcode('enable_lazy_load_reserve_space','true');output+=aiGenerateTextShortcode('enable_lazy_load_fadetime');output+=aiGenerateRadioShortcode('enable_lazy_load_manual','false');output+=aiGenerateRadioShortcode('enable_lazy_load_manual_element','false');output+=aiGenerateTextShortcode('reload_interval');output+=aiGenerateTextShortcode('hide_elements');output+=aiGenerateTextShortcode('content_id');output+=aiGenerateTextShortcode('content_styles');output+=aiGenerateTextShortcode('parent_content_css');output+=aiGenerateRadioShortcode('add_css_class_parent','false');output+=aiGenerateTextShortcode('change_parent_links_target');output+=aiGenerateRadioShortcode('show_iframe_as_layer','false');output+=aiGenerateRadioShortcode('show_iframe_as_layer_full','false');output+=aiGenerateTextShortcode('show_iframe_as_layer_header_file');output+=aiGenerateTextShortcodeWithDefault('show_iframe_as_layer_header_height','100');output+=aiGenerateRadioShortcode('show_iframe_as_layer_header_position','top');output+=aiGenerateRadioShortcode('show_iframe_as_layer_keep_content','true');var showPartOfIframe=aiGenerateRadioShortcode('show_part_of_iframe','false');output+=showPartOfIframe;if(showPartOfIframe!==''){output+=aiGenerateTextShortcodeWithDefault('show_part_of_iframe_x',-1);output+=aiGenerateTextShortcodeWithDefault('show_part_of_iframe_y',-1);output+=aiGenerateTextShortcode('show_part_of_iframe_width');output+=aiGenerateTextShortcode('show_part_of_iframe_height');output+=aiGenerateRadioShortcode('show_part_of_iframe_allow_scrollbar_horizontal','false');output+=aiGenerateRadioShortcode('show_part_of_iframe_allow_scrollbar_vertical','false');output+=aiGenerateTextShortcode('show_part_of_iframe_style');output+=aiGenerateRadioShortcode('show_part_of_iframe_zoom','false');output+=aiGenerateTextShortcode('show_part_of_iframe_next_viewports');output+=aiGenerateRadioShortcode('show_part_of_iframe_next_viewports_loop','false');output+=aiGenerateTextShortcode('show_part_of_iframe_new_window');output+=aiGenerateTextShortcode('show_part_of_iframe_new_url');output+=aiGenerateRadioShortcode('show_part_of_iframe_next_viewports_hide','false');}
output+=aiGenerateTextShortcode('hide_part_of_iframe');output+=aiGenerateRadioShortcode('add_css_class_iframe','false');output+=aiGenerateTextShortcode('iframe_hide_elements');output+=aiGenerateTextShortcode('onload_show_element_only');output+=aiGenerateTextShortcode('iframe_content_id');output+=aiGenerateTextShortcode('iframe_content_styles');output+=aiGenerateTextShortcode('iframe_content_css');output+=aiGenerateTextShortcode('change_iframe_links');output+=aiGenerateTextShortcode('change_iframe_links_target');output+=aiGenerateTextShortcode('change_iframe_links_href');output+=aiGenerateTextShortcode('onload');output+=aiGenerateRadioShortcode('onload_resize','false');output+=aiGenerateTextShortcode('onload_resize_delay');output+=aiGenerateRadioShortcode('store_height_in_cookie','false');output+=aiGenerateTextShortcode('additional_height');output+=aiGenerateRadioShortcode('onload_resize_width','false');output+=aiGenerateTextShortcode('resize_on_ajax');output+=aiGenerateRadioShortcode('resize_on_ajax_jquery','true');output+=aiGenerateTextShortcode('resize_on_click');output+=aiGenerateTextShortcodeWithDefault('resize_on_click_elements','a');output+=aiGenerateTextShortcode('resize_on_element_resize');output+=aiGenerateTextShortcodeWithDefault('resize_on_element_resize_delay','250');output+=aiGenerateTextShortcode('tab_hidden');output+=aiGenerateTextShortcode('tab_visible');output+=aiGenerateRadioShortcode('add_document_domain','false');if(document_domain_add==='true'){output+=aiGenerateTextShortcode('document_domain');}
output+=aiGenerateRadioShortcode('enable_external_height_workaround','external');output+=aiGenerateRadioShortcode('hide_page_until_loaded_external','false');output+=aiGenerateTextShortcode('pass_id_by_url');output+=aiGenerateRadioShortcode('multi_domain_enabled','false');output+=aiGenerateRadioShortcode('use_post_message','false');output+=aiGenerateTextShortcode('additional_css');output+=aiGenerateTextShortcode('additional_js');output+=aiGenerateTextShortcode('additional_js_file_iframe');output+=aiGenerateTextShortcode('additional_css_file_iframe');}else{if(include_html_val===''){output+=aiGenerateTextShortcode('include_url');output+=aiGenerateTextShortcode('include_content');output+=aiGenerateTextShortcode('include_height');output+=aiGenerateTextShortcode('include_fade');output+=aiGenerateRadioShortcode('include_hide_page_until_loaded','false');}else{output+=aiGenerateTextShortcode('include_html');}}
output+=aiGenerateRadioShortcode('debug_js','false');output+=']';jQuery('#gen-shortcode').html(output);}
function aiGenerateTextShortcodeWithDefault(field,defaultValue){var output='';var value=jQuery('#'+field);var val=value.val();if(value.length>0&&val!==''&&val!==defaultValue){output=field+'="'+val+'" ';}
return output;}
function aiGenerateTextShortcode(field){var output='';var value=jQuery('#'+field);var val=value.val();if(value.length>0&&val!==''&&val!=='0'){output=field+'="'+val+'" ';}
return output;}
function aiGenerateRadioShortcode(field,defaultValue){var output='';var value=jQuery('input:radio[name='+field+']:checked');var val=value.val();if(value.length>0&&val!==defaultValue){output+=field+'="'+val+'" ';}
return output;}
function aiAddCssClassAllParents(element){var parents=jQuery(element).parentsUntil('html');var ai_class='ai-class-';for(var i=0;i<parents.length;i++){var id=jQuery(parents[i]).attr('id');if(typeof id!=='undefined'){if(id.indexOf('ai-')!==0){jQuery(parents[i]).addClass(ai_class+id);}}else{jQuery(parents[i]).addClass(ai_class+i);}}}
function aiAutoZoomExternalHeight(id,width,height,responsive){var parentWidth=aiAutoZoomExternal(id,width,responsive);var zoomRatio=window['zoom_'+id];var oldScrollposition=jQuery(document).scrollTop();var newHeight=Math.ceil(height*zoomRatio);jQuery('#ai-zoom-div-'+id).css('height',newHeight);jQuery("html,body").scrollTop(oldScrollposition);return parentWidth;}
function aiAutoZoomExternal(id,width,responsive){var obj=document.getElementById(id);var objAround=document.getElementById('ai-zoom-div-'+id);var jObj=jQuery('#'+id);if(responsive==='true'){jObj.css('max-width','100%');}
var iframeWidth=width;var parentWidth=aiGetParentIframeWidth(obj);if(parentWidth===iframeWidth){parentWidth=aiGetParentIframeWidth(objAround);}
var zoomRatio=parentWidth/iframeWidth;var zoomRatioRounded=Math.floor(zoomRatio*100)/100;if(zoomRatioRounded>1){zoomRatioRounded=1;}
aiSetZoom(id,zoomRatioRounded);window['zoom_'+id]=zoomRatioRounded;jObj.width(iframeWidth).css('max-width','none');return parentWidth;}
function aiAutoZoom(id,responsive,ratio){var parts=ratio.split('|');ratio=parts[0];var width=-1;if(parts.length!==1){width=parts[1];}
var obj=document.getElementById(id);var iframeWidth;if(width===-1){obj.width=1;obj.style.width='1px';iframeWidth=aiGetIframeWidth(obj);obj.width=iframeWidth;obj.style.width=iframeWidth+'px';}else{iframeWidth=width;}
var parentWidth=aiAutoZoomExternal(id,iframeWidth,responsive);if(ratio===''){aiResizeIframe(obj,false);}else{var newheight=Math.ceil(iframeWidth*ratio);obj.height=newheight;obj.style.height=newheight+'px';if(jQuery('#ai-zoom-div-'+obj.id).length!==0){var zoom=window['zoom_'+obj.id];jQuery('#ai-zoom-div-'+obj.id).css('height',Math.ceil(newheight*zoom));}}
return parentWidth;}
function aiSetZoom(id,zoom){var obj=jQuery('#'+id);if(aiIsIe8===true){obj.css('-ms-zoom',zoom);}
obj.css({'-ms-transform':'scale('+zoom+')','-moz-transform':'scale('+zoom+')','-o-transform':'scale('+zoom+')','-webkit-transform':'scale('+zoom+')','transform':'scale('+zoom+')'});}
function aiAutoZoomViewport(id,full){var viewportDiv=jQuery(id);var outerDiv=viewportDiv.parent();var counter=0;while(outerDiv.is('p')||(outerDiv.attr('id')!==undefined&&outerDiv.attr('id').indexOf('ai-')===0)){outerDiv=outerDiv.parent();if(counter++>10){alert('Unexpected div structure. Please disable the zoom.');break;}}
var viewportDivWidth=viewportDiv.width();var outer_div_width=outerDiv.width();var viewportDivHeight=viewportDiv.height();var zoom=outer_div_width/viewportDivWidth;if(full==='true'&&zoom>1){zoom=1;}
aiSetZoom(viewportDiv.attr('id'),zoom);var marginLeft=-Math.round((viewportDivWidth-viewportDivWidth*zoom)/2);var marginTop=-Math.round((viewportDivHeight-viewportDivHeight*zoom)/2);viewportDiv.css({'margin-left':marginLeft+'px','margin-right':marginLeft+'px','margin-top':marginTop+'px','margin-bottom':marginTop+'px'});}
function aiResetAiSettings(){jQuery('#action').val('reset');}
function aiCheckInputNumber(inputField){inputField.value=inputField.value.split(' ').join('');var f=inputField.value;if(inputField.value===''){return;}
var match=f.match(/^(\-){0,1}([\d.])+(px|%|em|pt)?(\-|\+){0,1}([\d.]){0,7}(px|%|em|pt)?$/);if(!match){alert('Please check the value you have entered. Only numbers with a dot or with an optional px, %, em or pt are allowed.');setTimeout(function(){inputField.focus();},10);}}
function aiCheckInputNumberOnly(inputField){inputField.value=inputField.value.split(' ').join('');var f=inputField.value;if(inputField.value===''){inputField.value='0';return;}
var match=f.match(/^(\-){0,1}([\d.])+$/);if(!match){alert('Please check the value you have entered. Only numbers without a dot or optional px, %, em or pt are allowed.');setTimeout(function(){inputField.focus();},10);}}
function aiShowHeader(){var y=jQuery(window).scrollTop();jQuery(window).scrollTop(y-40);}
function aiSetScrollposition(){var scrollposition=jQuery(document).scrollTop();jQuery('#scrollposition').val(scrollposition);}
function aiResetShowPartOfAnIframe(id){jQuery('#'+id).css('top','0px').css('left','0px').css('position','static');jQuery('#ai-div-'+id).css('width','auto').css('height','auto').css('overflow','auto').css('position','static');}
function aiShowLayerIframe(event,id,path,hideUntilLoaded,showLoadingIcon,keep,reload){keep=(keep===undefined)?false:keep;reload=(reload===undefined)?true:reload;var layerId='#'+id;jQuery('#ai-zoom-div-'+id).show();if(reload&&hideUntilLoaded==='true'){jQuery(layerId).css('visibility','hidden');}
jQuery(layerId).show();if(jQuery('#ai-layer-div-'+id).length){layerId='#ai-layer-div-'+id;jQuery(layerId).show();}
jQuery('body').css('overflow','hidden');jQuery('html').css('overflow-y','visible');jQuery('body').append('<img id="ai_backlink" src="'+path+'close.png" style="z-index:100005;position:fixed;top:0;right:0;cursor:pointer" />');var icon='<!-- -->';if(reload&&showLoadingIcon==='true'){icon='<div id="ai-div-loader-global" style="position: fixed;z-index:100004;margin-left:-33px;left: 50%;top:50%;margin-top:-33px"><img src="'+path+'loader.gif" width="66" height="66" title="Loading" alt="Loading"></div>';}
jQuery(layerId).parent().append('<div id="ai_backlayer" style="z-index:100001;position:fixed;top:0;left:0;width:100%;height:100%;background-color: rgba(50,50,50,0.5);overflow:hidden;cursor:pointer"><!-- --></div>'+icon);jQuery('#ai_backlink, #ai_backlayer').click(function(){aiHideLayerIframe(id,keep);});if(!reload){event.preventDefault();event.stopPropagation();}}
function aiHideLayerIframe(id,keep){jQuery('#'+id).hide();if(!keep){jQuery('#'+id).attr('src','about:blank');aiLayerIframeHrefs[id]='about:blank';}
jQuery('#ai-zoom-div-'+id).hide();jQuery('#ai-layer-div-'+id).hide();jQuery('#ai_backlink').remove();jQuery('#ai_backlayer').remove();jQuery('#ai-div-loader-global').remove();jQuery('body').css('overflow','auto');jQuery('html').css('overflow-y','scroll');}
var aiLayerIframeHrefs=[];function aiCheckReload(link,id){var iframeSrc;if(typeof aiLayerIframeHrefs[id]==='undefined'){iframeSrc=jQuery('#'+id).attr('src');}else{iframeSrc=aiLayerIframeHrefs[id];}
var linkHref=jQuery(link).attr('href');aiLayerIframeHrefs[id]=linkHref;return(iframeSrc!==linkHref);}
function aiChangeUrlParam(loc,param,orig,prefix){var newUrl;if(loc!==encodeURIComponent(orig)){newUrl=aiSetGetParameter(param,loc);var removeProtocol=true;if(prefix){var repUrl=newUrl.replace(prefix,'');if(repUrl===newUrl){removeProtocol=false;}
newUrl=repUrl;}
if(removeProtocol){newUrl=newUrl.replace('http%3A%2F%2F','');if(window.location.href.toLowerCase().lastIndexOf("http:",0)!==-1){newUrl=newUrl.replace('https%3A%2F%2F','s|');}else{newUrl=newUrl.replace('https%3A%2F%2F','');}}}else{var fullUrl=window.location.href;newUrl=aiRemoveURLParameter(fullUrl,param);}
if(aiSupportsHistoryApi()){newUrl=newUrl.replace(/%2F/g,'/');window.history.pushState({},'',newUrl);window.onpopstate=function(event){if(event&&event.state){window.history.back();}};}}
function aiSupportsHistoryApi(){return!!(window.history&&history.pushState);}
function aigetIframeLocation(id){try{var location=document.getElementById(id).contentWindow.location;return encodeURIComponent(location);}catch(e){if(console&&console.log){console.log('Advanced iframe configuration error: You have enabled to add the url to the url on the same domain. But you use an iframe page on a different domain. You need to use the pro version of the external workaround like described in the settings. Also check the next log. There the browser message for this error is displayed.');console.log(e);}}}
function aiSetGetParameter(paramName,paramValue)
{var url=window.location.href;var splitAtAnchor=url.split('#');url=splitAtAnchor[0];var anchor=typeof splitAtAnchor[1]==='undefined'?'':'#'+splitAtAnchor[1];if(url.indexOf(paramName+'=')>=0){var prefix=url.substring(0,url.indexOf(paramName));var suffix=url.substring(url.indexOf(paramName));suffix=suffix.substring(suffix.indexOf('=')+1);suffix=(suffix.indexOf('&')>=0)?suffix.substring(suffix.indexOf('&')):'';url=prefix+paramName+'='+paramValue+suffix;}else{if(url.indexOf('?')<0){url+='?'+paramName+'='+paramValue;}else{url+='&'+paramName+'='+paramValue;}}
return url+anchor;}
function aiRemoveURLParameter(url,parameter){var urlparts=url.split('?');if(urlparts.length>=2){var prefix=encodeURIComponent(parameter)+'=';var pars=urlparts[1].split(/[&;]/g);for(var i=pars.length;i-->0;){if(pars[i].lastIndexOf(prefix,0)!==-1){pars.splice(i,1);}}
if(pars.length!==0){url=urlparts[0]+'?'+pars.join('&');}else{url=urlparts[0];}
return url;}else{return url;}}
function aiAddCss(id,css){css=decodeURIComponent(css.replace(/\+/g,'%20'));var body=jQuery(id).contents().find('body');var s=document.createElement('style');s.setAttribute('type','text/css');if(s.styleSheet){s.styleSheet.cssText=css;}else{s.appendChild(document.createTextNode(css));}
body.append(s);}
function aiAddCssFile(id,filename){var body=jQuery(id).contents().find('body');var link=document.createElement('link');link.rel='stylesheet';link.type='text/css';link.href=filename;body.append(link);}
function aiAddJsFile(id,filename){jQuery.ajaxSetup({cache:true});var body=jQuery(id).contents().find('body');var script=document.createElement('script');script.type='text/javascript';script.src=filename;body.append(script);}
function aiPresetFullscreen(){jQuery('#style').val('position:fixed;z-index:9000;top:0px;left:0px;margin:0px');jQuery('#width').val('100%');jQuery('#height').val('100%');jQuery('#content_id').val('html,body');jQuery('#content_styles').val('overflow:hidden');jQuery('#hide_content_until_iframe_color').val('#ffffff');}
jQuery(document).ready(function(){jQuery.each(aiReadyCallbacks,function(index,callback){callback();});setTimeout(function(){jQuery("#ai #ai-updated-text").css("visibility","hidden")},4000);jQuery('#ai #checkIframes').on('click',function(){jQuery(this).addClass('disabled');jQuery('.ai-spinner').css('display','inline-table');setTimeout(aiDisableCheckIframes,200);});var moved=false;jQuery('#aiDebugDivTotal').mousedown(function(){moved=false;}).mousemove(function(){moved=true;}).mouseup(function(event){if(!moved){var elem=jQuery('#aiDebugDiv');if(Math.floor(elem.height())>'300'){elem.height('38px');}else{elem.height('400px');}}});if(typeof ai_show_id_only!=='undefined'){if(jQuery('#'+ai_show_id_only).length===0){alert('The element with the id "'+ai_show_id_only+'" cannot be found. Please check your configuration.');}else{var element=jQuery('#'+ai_show_id_only);element.siblings().hide();var parents=element.parents();parents.siblings().hide();parents.css('padding','0px').css('margin','0px').css('overflow','hidden');if(parent===top){var elementRaw=element[0];elementRaw.style.marginTop=elementRaw.style.marginBottom=0;elementRaw.style.overflow="hidden";var newHeightRaw=Math.max(elementRaw.scrollHeight,elementRaw.offsetHeight);var newHeight=parseInt(newHeightRaw,10);var data={'aitype':'height','height':newHeight,'id':ai_show_id_only};var json_data=JSON.stringify(data);parent.postMessage(json_data,'*');}}}});function aiDisableCheckIframes(){jQuery('#checkIframes').prop('disabled','disabled');}
function aiProcessMessage(event,id,debug){var jsObject;try{var jsObject=JSON.parse(event.data);}catch(e){if(debug==='debug'&&console&&console.log){console.log('The received message cannot be parsed and seems not to belong to advanced iframe pro. Please disable the postMessage debug mode if this o.k. and that this message is not shown anymore.');console.log(e);}
var jsObject=event.data;}
try{if(jsObject.hasOwnProperty('aitype')){if(id===jsObject.id){var type=jsObject.aitype;if(type==='debug'){aiProcessDebug(jsObject);}else if(type==='scrollToTop'){aiProcessScrollToTop(jsObject);}else{if(type==='height'){aiProcessHeight(jsObject);}else if(type==='show'){aiProcessShow(jsObject);}
for(var key in jsObject.data){if(jsObject.data.hasOwnProperty(key)){jQuery(key).html(jsObject.data[key]);}}}}}}catch(e){if(debug==='debug'&&console&&console.log){console.log('The received message cannot be parsed and seems not to belong to advanced iframe pro. Please disable the postMessage debug mode if this o.k. and that this message is not shown anymore.');console.log(e);}}}
function aiProcessDebug(jsObject){var debugData=jsObject.data;if(jQuery('#aiDebugDiv').length!==0){jQuery('#aiDebugDiv').append('<p class="ai-debug-remote"> r: '+debugData+'</p>');}}
function aiProcessScrollToTop(jsObject){var id=jsObject.id;aiScrollToTop(id,aiOnloadScrollTop);}
function aiProcessHeight(jsObject){var nHeight=jsObject.height;var nWidth=jsObject.width;var iAnchor=parseInt(jsObject.anchor,10);var id=jsObject.id;if(nHeight!=null){try{var loc=jsObject.loc;if(loc!=null){aiChangeUrl(loc);}
if(id!=null){var iHeight=parseInt(nHeight,10);var iWidth=parseInt(nWidth,10);aiResizeIframeHeightId(iHeight,iWidth,id);if(!isNaN(iAnchor)&&iAnchor>-1){var iframeTop=jQuery("#"+id).offset().top;setTimeout(function(){jQuery("html,body").scrollTop(Math.round(iframeTop+iAnchor));aiShowIframeId(id);},100);}else{aiShowIframeId(id);}}else{alert('Please update the ai_external.js to the current version.');}}catch(e){if(console&&console.log){console.log(e);}}}}
function aiProcessShow(jsObject){var id=jsObject.id;try{aiShowIframeId(id);}catch(e){if(console&&console.log){console.log(e);}}}
if(!String.prototype.includes){String.prototype.includes=function(search,start){if(typeof start!=='number'){start=0;}
if(start+search.length>this.length){return false;}else{return this.indexOf(search,start)!==-1;}};};var danielmiessler_js=(function(){const DM_SETTINGS={disableDropcaps:0}
const NEWSLETTER_TIMEOUT=1000
const inBrowser=typeof window!=='undefined';const UA=inBrowser&&window.navigator.userAgent.toLowerCase()
const isIE=UA&&/msie|trident/.test(UA)
const isMobile=UA&&(UA.indexOf('android')>0||/iphone|ipad|ipod|ios/.test(UA))
const DOC_EL=document
const DOC_TITLE=encodeURIComponent(DOC_EL.title.replace(' - danielmiessler.com',''))
const DOC_LOCATION=encodeURIComponent(DOC_EL.location)
const LOG=(msg)=>console.log(msg)
const DOCUMENT_HEIGHT=Math.max(DOC_EL.body.scrollHeight,DOC_EL.body.offsetHeight,DOC_EL.documentElement.clientHeight,DOC_EL.documentElement.scrollHeight,DOC_EL.documentElement.offsetHeight);const WINDOW_HEIGHT=()=>window.innerHeight||DOC_EL.documentElement.clientHeight||DOC_EL.getElementsByTagName('body')[0].clientHeight;const HAS_CLASS=(name)=>DOC_EL.body.className.indexOf(name)>-1
const ADD_CLASS=(name)=>DOC_EL.body.className+=' '+name
const REMOVE_CLASS=(name)=>DOC_EL.body.className=DOC_EL.body.className.replace(' '+name,'')
const SHARE_LINKEDIN=()=>'https://www.linkedin.com/shareArticle?mini=true&url='+DOC_LOCATION+'&title='+DOC_TITLE
const SHARE_TWITTER=()=>'https://twitter.com/share?url='+DOC_LOCATION+'&text='+DOC_TITLE+' @danielmiessler'
const SHARE_FACEBOOK=()=>'http://www.facebook.com/sharer.php?u='+DOC_LOCATION+'&t='+DOC_TITLE
const SHARE_GOOGLE=()=>'https://plus.google.com/share?url='+DOC_LOCATION
const SHARE_MAIL=()=>'mailto:?subject=This%20Post%20on%20danielmiessler.com&cc=daniel@danielmiessler.com&body='+DOC_LOCATION
const SHARE_REDDIT=()=>'https://www.reddit.com/submit?url='+DOC_LOCATION+'&title='+DOC_TITLE
const SHARE_COMMENT=()=>'https://www.reddit.com/submit?url='+DOC_LOCATION+'&title='+DOC_TITLE
const SHARE_HACKERNEWS=()=>'http://news.ycombinator.com/submitlink?u='+DOC_LOCATION+'&t='+DOC_TITLE;const COOKIE_CREATE=(name,value,days)=>{let expires="";if(days){let date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000))
expires="; expires="+date.toGMTString()}else{expires="";}
document.cookie=name+"="+value+expires+"; path=/";}
const COOKIE_READ=(name)=>{let nameEQ=name+"=";let ca=document.cookie.split(';');for(let i=0;i<ca.length;i++){let c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;}
const COOKIE_ERASE=(name)=>{createCookie(name,"",-1);}
function handleScrollFX(){var instance={}
var settings={top:{percent:20,pixels:200,},bottom:{percent:95,},scroll_timeout:null}
var state={watching_scroll:true,event_attached:false,event_destroyed:false,scroll:{pixels:{current:0,prev:0},percent:{current:0,prev:0},scroll_direction:''}}
var view_controller={scroll_disabled:function(){if(!HAS_CLASS('scrolling-fx-disabled'))ADD_CLASS('scrolling-fx-disabled')},scroll_up:function(){REMOVE_CLASS('scrolling-down')
if(!HAS_CLASS('scrolling-up'))ADD_CLASS('scrolling-up')},scroll_down:function(){REMOVE_CLASS('scrolling-up')
if(!HAS_CLASS('scrolling-down'))ADD_CLASS('scrolling-down')},scroll_reset:function(){REMOVE_CLASS('scrolling-down')
REMOVE_CLASS('scrolling-up')},page_mid:function(){REMOVE_CLASS('bottom-page')
if(!HAS_CLASS('mid-page'))ADD_CLASS('mid-page')},page_bottom:function(){REMOVE_CLASS('mid-page')
if(!HAS_CLASS('bottom-page'))ADD_CLASS('bottom-page')},page_reset:function(){REMOVE_CLASS('mid-page')
REMOVE_CLASS('bottom-page')}}
var init=function(){window.addEventListener('resize',resizeHandler)
attach_scroll_events()
instance.setup=true}
var attach_scroll_events=function(){if(checkCanUseScrollFX()){if(!state.event_attached){window.addEventListener('scroll',scrollHandler)
state.event_attached=true
state.event_destroyed=false}}else{if(!state.event_destroyed){window.removeEventListener('scroll',scrollHandler)
state.event_destroyed=true
state.event_attached=false}}}
var getScrollPosition=instance.getScrollPosition=function(){var val=(window.pageYOffset||document.scrollTop)-(document.clientTop||0);return(!isNaN(val))?val:0;}
var getScrollPercent=instance.getScrollPercent=function(){var val=(state.scroll.pixels.current/(DOCUMENT_HEIGHT-WINDOW_HEIGHT()))*100
return(!isNaN(val))?val:0;}
var getScrollDirection=instance.getScrollDirection=function(){var val=(window.pageYOffset||document.scrollTop)-(document.clientTop||0);return(state.scroll.pixels.current>=state.scroll.pixels.prev)?'down':'up'}
var setCurrentValues=function(){state.scroll.pixels.current=getScrollPosition();state.scroll.percent.current=getScrollPercent()}
var setPrevValues=function(){state.scroll.pixels.prev=state.scroll.pixels.current
state.scroll.percent.prev=state.scroll.percent.current}
var setDirection=function(){state.scroll_direction=getScrollDirection()}
var checkCanUseScrollFX=function(){return state.watching_scroll=(DOCUMENT_HEIGHT-WINDOW_HEIGHT())>500}
var setAll=function(){setPrevValues()
setCurrentValues()
setDirection()
if(state.scroll.pixels.current>settings.top.pixels){if(state.scroll.percent.current>settings.bottom.percent){view_controller.page_bottom()}else{view_controller.page_mid()}}else{view_controller.page_reset()}
if(state.scroll.percent.current<settings.bottom.percent&&state.scroll.percent.current>7&&state.scroll_direction==='up'){if((state.scroll.percent.prev-state.scroll.percent.current)>0.5){view_controller.scroll_up()}}else if(state.scroll.percent.current<settings.bottom.percent&&state.scroll.percent.current>10&&state.scroll_direction==='down'){if((state.scroll.percent.current-state.scroll.percent.prev)>2){view_controller.scroll_down()}}else{view_controller.scroll_reset()}}
var scrollendHandler=function(){setAll()}
var scrollHandler=throttle(function(event){if(settings.scroll_timeout!==null){clearTimeout(settings.scroll_timeout);}
if(state.watching_scroll){setAll()
settings.scroll_timeout=setTimeout(scrollendHandler,250);}},80)
var resizeHandler=throttle(function(event){attach_scroll_events()
if(state.watching_scroll){setAll()}},200)
if(!instance.setup){init();}
return instance}
function handleScrollFX2(){var instance={}
var settings={top:{percent:50,pixels:200,},bottom:{percent:95,},scroll_timeout:null}
var state={watching_scroll:true,event_attached:false,event_destroyed:false,scroll:{pixels:{current:0,prev:0},percent:{current:0,prev:0},scroll_direction:''}}
var view_controller={scroll_disabled:function(){if(!HAS_CLASS('nl-scrolling-fx-disabled'))ADD_CLASS('nl-scrolling-fx-disabled')},scroll_reset:function(){REMOVE_CLASS('nl-scrolling-down')
REMOVE_CLASS('nl-scrolling-up')},page_mid:function(){REMOVE_CLASS('nl-bottom-page')
if(!HAS_CLASS('nl-mid-page'))ADD_CLASS('nl-mid-page')},page_bottom:function(){REMOVE_CLASS('nl-mid-page')
if(!HAS_CLASS('nl-bottom-page'))ADD_CLASS('nl-bottom-page')},page_reset:function(){REMOVE_CLASS('nl-mid-page')
REMOVE_CLASS('nl-bottom-page')}}
var init=function(){window.addEventListener('resize',resizeHandler)
attach_scroll_events()
instance.setup=true}
var attach_scroll_events=function(){if(checkCanUseScrollFX()){if(!state.event_attached){window.addEventListener('scroll',scrollHandler)
state.event_attached=true
state.event_destroyed=false}}else{if(!state.event_destroyed){window.removeEventListener('scroll',scrollHandler)
state.event_destroyed=true
state.event_attached=false}}}
var getScrollPosition=instance.getScrollPosition=function(){var val=(window.pageYOffset||document.scrollTop)-(document.clientTop||0);return(!isNaN(val))?val:0;}
var getScrollPercent=instance.getScrollPercent=function(){var val=(state.scroll.pixels.current/(DOCUMENT_HEIGHT-WINDOW_HEIGHT()))*100
return(!isNaN(val))?val:0;}
var getScrollDirection=instance.getScrollDirection=function(){var val=(window.pageYOffset||document.scrollTop)-(document.clientTop||0);return(state.scroll.pixels.current>=state.scroll.pixels.prev)?'down':'up'}
var setCurrentValues=function(){state.scroll.pixels.current=getScrollPosition();state.scroll.percent.current=getScrollPercent()}
var setPrevValues=function(){state.scroll.pixels.prev=state.scroll.pixels.current
state.scroll.percent.prev=state.scroll.percent.current}
var setDirection=function(){state.scroll_direction=getScrollDirection()}
var checkCanUseScrollFX=function(){return state.watching_scroll=(DOCUMENT_HEIGHT-WINDOW_HEIGHT())>500}
var setAll=function(){setPrevValues()
setCurrentValues()
setDirection()
if(state.scroll.percent.current>settings.top.percent){view_controller.page_mid()}else{view_controller.page_reset()}}
var scrollendHandler=function(){setAll()}
var scrollHandler=throttle(function(event){if(settings.scroll_timeout!==null){clearTimeout(settings.scroll_timeout);}
if(state.watching_scroll){setAll()
settings.scroll_timeout=setTimeout(scrollendHandler,250);}},80)
var resizeHandler=throttle(function(event){attach_scroll_events()
if(state.watching_scroll){setAll()}},200)
if(!instance.setup){init();}
return instance}
function danielmiesslerMobileNav(){var nav_toggler=DOC_EL.getElementById('main-menu-toggle')||false;var site_inner=DOC_EL.getElementsByClassName('site-inner')[0]||false;var site_container=DOC_EL.getElementsByClassName('site-container')[0]||false;if(!nav_toggler)return false;var clicker=function(evt){evt.preventDefault()
if(HAS_CLASS('mobile-menu-active')){REMOVE_CLASS('mobile-menu-active');site_container.removeAttribute('style')
site_inner.removeEventListener('click',clicker);}else{ADD_CLASS('mobile-menu-active')
site_container.setAttribute('style','height:'+WINDOW_HEIGHT()+'px')
site_inner.addEventListener('click',clicker);}}
nav_toggler.addEventListener('click',clicker);};function danielmiesslerMobileNavToggle(){var all_menu_items=document.getElementsByClassName('menu-item-parent');var has_submenu=document.getElementsByClassName('menu-item-has-children');var activeMenu=''
var toggleSubMenu=function(e){var clicked=e.target
if(activeMenu===clicked.dataset.isChildMenuOf){for(var i=0;i<all_menu_items.length;i++){all_menu_items[i].classList.remove('sub-menu-item-active')
all_menu_items[i].classList.remove('hidden')}
activeMenu=''}else{for(var i=0;i<all_menu_items.length;i++){all_menu_items[i].classList.remove('sub-menu-item-active')
all_menu_items[i].classList.add('hidden')}
e.target.parentElement.classList.add('sub-menu-item-active')
e.target.parentElement.classList.remove('hidden')
activeMenu=clicked.dataset.isChildMenuOf}}
for(var i=0;i<has_submenu.length;i++){var element=has_submenu[i];element.dataset.isParentMenuOf='li-'+i
var addSpan=document.createElement("span");addSpan.classList.add('mobile-toggle')
addSpan.dataset.isChildMenuOf='li-'+i
addSpan.addEventListener('click',toggleSubMenu)
element.appendChild(addSpan)}}
function throttle(callback,limit){let wait=false;return function(){if(!wait){callback.call();wait=true;setTimeout(function(){wait=false},limit);}}}
function social_shares(){function init(){var social_button=DOC_EL.querySelectorAll('.share-js a');for(var i=0;i<social_button.length;i++){var button=social_button[i];dm_social_click_handler(button,button.dataset.dmShare)}}
function dm_social_click_handler(obj,location){var map_social={'linkedin':()=>SHARE_LINKEDIN(),'twitter':()=>SHARE_TWITTER(),'facebook':()=>SHARE_FACEBOOK(),'google-plus':()=>SHARE_GOOGLE(),'mail':()=>SHARE_MAIL(),'reddit':()=>SHARE_REDDIT(),'google':()=>SHARE_GOOGLE(),'comment':()=>SHARE_COMMENT(),'hackernews':()=>SHARE_HACKERNEWS()};obj.addEventListener('click',function(e){e.preventDefault();if(location!=='mail'){var y=window.top.outerHeight/2+window.top.screenY-(400/2)
var x=window.top.outerWidth/2+window.top.screenX-(500/2)
objWindow=window.open(map_social[location](),'Social Share','width=500,height=400,resizable=no,top='+y+',left='+x).focus();}else{window.location=map_social[location]();}
if(typeof gtag==='function'){gtag('event','Click - Social Share - '+location,{'event_category':'Social Share','event_label':DOC_TITLE,'non_interaction':true});}});}
init();}
function Header_Search(){var setup=false;var active=false;var search_toggle=document.getElementById('top-search-toggle');var search_form=document.getElementById('dmt1-search-form');var init=function(){search_toggle.addEventListener('click',function(e){e.preventDefault();active=(active===true)?false:true;if(active===true){showSearch();}else{hideSearch();}})
setup=true;};var showSearch=function(){if(!HAS_CLASS('show-search'))ADD_CLASS('show-search')
var input=search_form.querySelector('input[type="search"]');input.focus()
active=true;};var hideSearch=function(){REMOVE_CLASS('show-search')
active=false;};var resetSearch=function(){};if(setup===false){init();}};function do_dropcaps(){var find=(function(){var found;var cc=document.getElementsByClassName('entry-content')[0];var cp=cc.querySelectorAll('p');for(var c=0;c<5;c++){if(cp[c].innerText!==''&&cp[c].classList.value.indexOf('wp-caption')===-1&&cp[c].parentNode.classList.value.indexOf('entry-content')>-1){found=cp[c];break;}}
return found}())
if(find){if(find.childNodes.length&&find.childNodes[0].nodeName!=='A'&&find.childNodes[0].nodeName!=='IMG'){find.innerHTML=find.innerHTML.replace(/\b(\w)/,'<span class="dropcaps">$&</span>');}}}
function dm_newsletter_popup(){var controls={'body':DOC_EL.body,'popup':DOC_EL.getElementById('dm-newsletter-popup'),'close_newsletter':DOC_EL.getElementById('dm-newsletter-close'),'newsletter':DOC_EL.getElementById('mc-embedded-subscribe-form')};if(COOKIE_READ('dm_ns_close')!=='1'){controls.close_newsletter.addEventListener('click',function(){togglePopup(false);COOKIE_CREATE('dm_ns_close','1',30);if(typeof gtag==='function'){gtag('event','Close',{'event_category':'Newsletter Popup','event_label':DOC_TITLE,'non_interaction':true});}});controls.newsletter.addEventListener('submit',function(){if(typeof gtag==='function'){gtag('event','Submit',{'event_category':'Newsletter Popup','event_label':DOC_TITLE,'transport':'beacon'});}
togglePopup(false);COOKIE_CREATE('dm_ns_close','1',365);return true;});DOC_EL.onkeydown=function(evt){if(controls.body.dataset.popupActive==='1'){var isEscape=false;if("key"in evt){isEscape=(evt.key=="Escape"||evt.key=="Esc");}else{isEscape=(evt.keyCode==27);}
if(isEscape){togglePopup(false);}}};if(window.location.path!=='/'){setTimeout(function(){togglePopup(true);},NEWSLETTER_TIMEOUT);}
if(window.location.search=='?popup'){togglePopup(true);}}
function randomizePopup(){var d=Math.random();if(d<0.5){return false}
else if(d<0.7){return true}
else{return false}}
function togglePopup(pos){if(!randomizePopup()){pos=false}
if(pos){controls.body.dataset.popupActive=(pos)?'1':'0';}else{controls.body.dataset.popupActive=(typeof controls.body.dataset.popupActive==='undefined'||controls.body.dataset.popupActive==='0')?1:0;}
if(typeof gtag==='function'){var position=(!pos)?'Close':'Open';gtag('event',position,{'event_category':'Newsletter Popup','event_label':DOC_TITLE,'non_interaction':true});}}}
try{danielmiesslerMobileNav()}catch(e){if(typeof gtag==='function'){gtag('event','JS',{'event_category':'Error','event_label':'Function init - danielmiesslerMobileNav','non_interaction':true})}}
try{danielmiesslerMobileNavToggle()}catch(e){if(typeof gtag==='function'){gtag('event','JS',{'event_category':'Error','event_label':'Function init - danielmiesslerMobileNavToggle','non_interaction':true})}}
try{social_shares()}catch(e){if(typeof gtag==='function'){gtag('event','JS',{'event_category':'Error','event_label':'Function init - social_shares','non_interaction':true});}}
try{if(!isMobile&&DOC_EL.documentElement.clientWidth>680){handleScrollFX()
handleScrollFX2()}}catch(e){if(typeof gtag==='function'){gtag('event','JS',{'event_category':'Error','event_label':'Function init - addScrollTriggers','non_interaction':true});}}
try{if(!isMobile&&DOC_EL.documentElement.clientWidth>680){dm_newsletter_popup()}}catch(e){if(typeof gtag==='function'){gtag('event','JS',{'event_category':'Error','event_label':'Function init - dm_newsletter_popup','non_interaction':true});}}
try{Header_Search()}catch(e){if(typeof gtag==='function'){gtag('event','JS',{'event_category':'Error','event_label':'Function init - dm_newsletter_popup','non_interaction':true});}}
try{var disabled=(DM_SETTINGS&&typeof DM_SETTINGS.disableDropcaps!=='undefined')?DM_SETTINGS.disableDropcaps:'1'
if(disabled==='1'){do_dropcaps()}}catch(e){}}());var dm_event_tracking_data={dm_primary_nav:{parent_selector_attr:'id',parent_selector_value:'menu-main-menu',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Primary Menu'},dm_site_title:{parent_selector_attr:'class',parent_selector_value:'site-title',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Header Logo'},dm_breadcrumbs:{parent_selector_attr:'class',parent_selector_value:'breadcrumb',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Breadcrumb'},dm_entry_meta:{parent_selector_attr:'class',parent_selector_value:'entry-categories',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Blog Category'},dm_entry_title:{parent_selector_attr:'class',parent_selector_value:'entry-title',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Blog Title'},dm_blog_photo:{parent_selector_attr:'',parent_selector_value:'body',selector_tag:'a',selector_attr:'class',selector_value:'entry-image-link',trigger:'click',label:'{title}',category:'Link',action:'Blog Photo'},dm_sidebar_links:{parent_selector_attr:'class',parent_selector_value:'sidebar',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Sidebar'},dm_related_posts:{parent_selector_attr:'class',parent_selector_value:'yarpp-related',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Related Posts'},dm_popular_posts:{parent_selector_attr:'class',parent_selector_value:'explore-content',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Popular Posts'},dm_popular_posts:{parent_selector_attr:'id',parent_selector_value:'support-daniel-single',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Single Support Box'},dm_related_posts_other:{parent_selector_attr:'class',parent_selector_value:'relatedthumb',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{url}',category:'Link',action:'Related Posts'},dm_social_comment:{parent_selector_attr:'',parent_selector_value:'body',selector_tag:'a',selector_attr:'class',selector_value:'top_social',trigger:'click',label:'{title}',category:'Link',action:'Social Comment'},dm_explore_more:{parent_selector_attr:'class',parent_selector_value:'explore',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Explore More'},dm_footer_links:{parent_selector_attr:'class',parent_selector_value:'site-footer',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Footer Menu'},dm_page_toc_link:{parent_selector_attr:'class',parent_selector_value:'toc',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'TOC Link - {page_title}'},dm_page_collection_link:{parent_selector_attr:'class',parent_selector_value:'collection',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Collection Link - {page_title}'},dm_form_sidebar_mc:{parent_selector_attr:'class',parent_selector_value:'sidebar',selector_tag:'form',selector_attr:'id',selector_value:'mc-embedded-subscribe-form',trigger:'submit',label:'Sidebar Subscribe',category:'Form',action:'Submit'},dm_form_sidebar_mc:{parent_selector_attr:'class',parent_selector_value:'entry-before',selector_tag:'a',selector_attr:'href',selector_value:'*',trigger:'click',label:'{title}',category:'Link',action:'Before Page Sponsor Ad'},}
if(window.addEventListener){window.addEventListener('load',doAutoEventTracking,false);}else if(window.attachEvent){window.attachEvent('onload',doAutoEventTracking);}
function doAutoEventTracking(){"use strict"
var attempts=0,get_attempts=function(){return attempts;},set_attempts=function(){return attempts++;},get_ga=function(){if(get_attempts()>=10){console.warn('Google Analytics never loaded');return false;}
if(typeof gtag!=='function'){setTimeout(function(){set_attempts();get_ga();},250);}else{return true;}};if(get_ga()){window.get_dm_ga=new ga_auto_event_tracking();}}
function ga_auto_event_tracking(){this.doTracking();};ga_auto_event_tracking.prototype.doTracking=function(){var tracking_params=dm_event_tracking_data||false;if(!tracking_params)return false;for(var key in tracking_params){if(!tracking_params.hasOwnProperty(key))continue;var obj=tracking_params[key];var tracking_element_parent=this.getElementParent(obj);var tracking_elements;if(!tracking_element_parent)continue;if(tracking_element_parent!==false&&typeof tracking_element_parent!=='undefined'){tracking_elements=this.getElementsByAttribute(tracking_element_parent,obj.selector_tag,obj.selector_attr,obj.selector_value);}
if(tracking_elements){for(var i=0,obj_length=tracking_elements.length;i<obj_length;i++){var element=tracking_elements[i],category=(obj.category.indexOf('{')>-1)?this.helperGetLabel(obj.category,element):obj.category,action=(obj.action.indexOf('{')>-1)?this.helperGetLabel(obj.action,element):obj.action,label=(obj.label.indexOf('{')>-1)?this.helperGetLabel(obj.label,element):obj.label,action_type=this.getEventTriggerType(obj);this.addEventTriggerHandler(element,category,action,label,action_type);}}}};ga_auto_event_tracking.prototype.getElementsByAttribute=function(elm,selector_tag,selector_attr,selector_value){var elements_arr=(selector_tag=="*"&&elm.all)?elm.all:elm.getElementsByTagName(selector_tag),return_elements=[],attribute_value=(typeof selector_value!="undefined")?new RegExp("(^|\\s)"+selector_value+"(\\s|$)"):null,current,attribute;for(var i=0;i<elements_arr.length;i++){current=elements_arr[i];attribute=current.getAttribute&&current.getAttribute(selector_attr);if(typeof attribute=="string"&&attribute.length>0){if(typeof selector_value=="undefined"||(attribute_value&&attribute_value.test(attribute))){return_elements.push(current);}}}
return return_elements;}
ga_auto_event_tracking.prototype.getElementParent=function(obj){var ep=false;if(obj.parent_selector_attr){ep=this.getElementsByAttribute(document.body,"*",obj.parent_selector_attr,obj.parent_selector_value);ep=(ep[0])?ep[0]:false;}else{ep=document.body;}
return ep;};ga_auto_event_tracking.prototype.getEventTriggerType=function(obj){var at=(obj.trigger)?obj.trigger.trim().toLowerCase():'';var allowed_action_types=["click","dblclick","focus","blur","change","submit"];at=(allowed_action_types.indexOf(at)>-1)?at:null;return at;};ga_auto_event_tracking.prototype.addEventTriggerHandler=function(obj,category,action,label,action_type){var ogb=this;obj.addEventListener(action_type,function(){console.log('event',category,action,label)
gtag('event',action,{'event_category':category,'event_label':label});});};ga_auto_event_tracking.prototype.helperGetLabel=function(str,element){str=(str.indexOf('{url}')>-1)?str.replace('{url}',this.helperGetElementUrl(element)):str;str=(str.indexOf('{title}')>-1)?str.replace('{title}',this.helperGetElementText(element)):str;str=(str.indexOf('{page_title}')>-1)?str.replace('{page_title}',this.helperGetPageTitle()):str;return str;}
ga_auto_event_tracking.prototype.helperGetElementText=function(element){var et=element.textContent||element.innerText;if(typeof et!=='string'||et.length<1){if(element.getAttribute('title')){et=element.getAttribute('title');}else if(typeof element.childNodes[0].alt!=='null'){et=element.childNodes[0].alt;}else{et='no text';}}
if(typeof et==='undefined'){et='no text';}
et=et.trim();return et;};ga_auto_event_tracking.prototype.helperGetPageTitle=function(){var pt=document.title||'No Page Title';return pt;};ga_auto_event_tracking.prototype.helperGetElementUrl=function(element){var eu=element.href||null;if(!eu&&typeof eu==='undefined'){eu='no link';}
return eu;};